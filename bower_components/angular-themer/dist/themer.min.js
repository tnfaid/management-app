/**
 * angular-themer - v0.4.0 - 2016-11-25
 * https://github.com/fdomig/angular-themer
 * Copyright (c) 2016 Franziskus Domig
 */
angular.module("angular-themer",[]).provider("themer",function(){"use strict";var _storeTheme=!1,_styles=[],_selected={label:"",href:[""]},_watchers=[];this.setStyles=function(styles){_styles=styles,angular.forEach(_styles,function(style){void 0!==style.href&&null!==style.href||(style.href=[]),Array.isArray(style.href)||(style.href=[style.href])})};var getStyles=this.getStyles=function(){return angular.copy(_styles)};this.storeTheme=function(boolean){"boolean"==typeof boolean&&(_storeTheme=boolean)},this.getStoredTheme=function(){if(_storeTheme&&localStorage)return localStorage.getItem("selectedTheme")};var addWatcher=function(watcher){_watchers.push(watcher)},getSelected=this.getSelected=function(){return angular.copy(_selected)},setSelected=this.setSelected=function(key){angular.forEach(_styles,function(style){style.key===key&&(_selected=style,angular.forEach(_watchers,function(watcher){watcher(getSelected())}))})};this.$get=[function(){return{storeTheme:_storeTheme,getSelected:getSelected,setSelected:setSelected,addWatcher:addWatcher,getStyles:getStyles}}]}).directive("themerLink",function(){"use strict";return{restrict:"A",template:'<link rel="stylesheet" ng-repeat="style in selected" ng-href="{{ style }}" />',replace:!0,scope:!0,controller:["$scope","themer",function($scope,themer){$scope.selected=themer.getSelected().href,themer.addWatcher(function(style){$scope.selected=style.href})}]}}).directive("themerSwitcher",function(){"use strict";return{restrict:"A",template:'<select ng-model="theme.selected" ng-options="style.key as style.label for style in theme.styles"></select>',replace:!0,scope:!1,controller:["$scope","themer",function($scope,themer){$scope.theme={styles:themer.styles,selected:themer.getSelected().key},$scope.$watch("theme.selected",function(){$scope.theme.selected&&(themer.setSelected($scope.theme.selected),themer.storeTheme&&localStorage&&localStorage.setItem("selectedTheme",$scope.theme.selected))})}]}});